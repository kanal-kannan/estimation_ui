<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Interior Work Estimator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <link rel="shortcut icon" href="assets/logo.png" type="image/x-icon">

  <style>
  .product-row {
    display: grid;
    grid-template-columns: 1.5fr 1fr 1fr 0.8fr 0.8fr 0.8fr 0.8fr auto;
    align-items: center;
    gap: 0.75rem;
  }

  @media (max-width: 768px) {
    .product-row {
      grid-template-columns: 1fr;
    }

    .product-row > * {
      grid-column: 1 / -1;
    }
  }

  input, select {
    width: 100%;
  }

  .hidden {
  display: none !important;
}

</style>


</head>

<body class="bg-gray-50 min-h-screen p-4 md:p-8">
  <div class="max-w-4xl mx-auto bg-white rounded-lg shadow-lg overflow-hidden">
    <!-- Header -->
    <div class="bg-blue-600 text-white p-6">
      <div class="flex justify-between items-center">
        <h1 class="text-2xl md:text-3xl font-bold">Interior Work Estimator</h1>
        <svg class="w-8 h-8" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
        </svg>
      </div>
    </div>

    <div class="p-6">
      <!-- Client Information -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Client Name</label>
          <input type="text" placeholder="Enter Your Name"  class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Phone Number</label>
          <input type="tel"  maxlength="10" 
          minlength="10"
          pattern="[0-9]{10}" 
          required  
          placeholder="Enter 10-digit number"
          title="Please enter exactly 10 digits"

class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Date</label>
          <input type="date"id="dateInput" class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
        </div>
      </div>

      <!-- Products Table Header -->
      <!-- Products Table Header -->
<div id="productHeader" class="hidden md:grid product-row gap-2 mb-2 text-sm font-medium text-gray-700">
  <div>Product</div>
  <div>Structure</div>
  <div>Finish</div>
  <div>Length (ft)</div>
  <div>Width (ft)</div>
  <div>Rate (‚Çπ)</div>
  <div>Amount (‚Çπ)</div>
  <div></div>
</div>

<!-- Products Container -->
<div id="productContainer" class="hidden space-y-4 mb-6"></div>

<!-- Add Buttons -->
<div class="flex flex-wrap gap-3 mb-6">
  <button onclick="addProduct()" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition flex items-center gap-1">
    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
    </svg>
    Add Product
  </button>
  <button onclick="addCustomProduct()" class="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition flex items-center gap-1">
    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
    </svg>
    Add Custom Product
  </button>
</div>



      <!-- Options -->

      <!-- Totals -->
      <div class="bg-gray-50 p-4 rounded-lg mb-6">
        <div class="flex justify-between items-center">
          <div>
            <p id="subtotal" class="text-lg">Subtotal: ‚Çπ0.00</p>
            <p id="total" class="text-xl font-bold mt-1">Total: ‚Çπ0.00</p>
          </div>
          <button onclick="generatePDF()" class="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition flex items-center gap-1">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"></path>
            </svg>
            Generate PDF
          </button>
        </div>
      </div>
    </div>
  </div>

  <script>
  const PRODUCTS = [
    { name: "Wardrobe", structure: ["MR-Commercial Plywood", "BWR Plywood", "BWP Plywood", "BWR/BWP Plywood", "MDF Panel", "HMR Panel", "HDHMR Panel"], finish: ["Prelam", "Lamina", "Acrylic"] },
    { name: "Loft", structure: ["MR-Commercial Plywood", "BWR Plywood", "BWP Plywood", "BWR/BWP Plywood", "MDF Panel", "HMR Panel", "HDHMR Panel"], finish: ["Prelam", "Lamina", "Acrylic"] },
    { name: "Kitchen Kadapa Shelf", structure: ["MR-Commercial Plywood", "BWR Plywood", "BWP Plywood", "BWR/BWP Plywood", "MDF Panel", "HMR Panel", "HDHMR Panel"], finish: ["Prelam", "Lamina", "Acrylic"] },
    { name: "Modular Kitchen", structure: ["MR-Commercial Plywood", "BWR Plywood", "BWP Plywood", "BWR/BWP Plywood", "MDF Panel", "HMR Panel", "HDHMR Panel"], finish: ["Prelam", "Lamina", "Acrylic"] },
    { name: "Kitchen Wall Unit", structure: ["MR-Commercial Plywood", "BWR Plywood", "BWP Plywood", "BWR/BWP Plywood", "MDF Panel", "HMR Panel", "HDHMR Panel"], finish: ["Prelam", "Lamina", "Acrylic"] },
    { name: "Crockery Unit", structure: ["MR-Commercial Plywood", "BWR Plywood", "BWP Plywood", "BWR/BWP Plywood", "MDF Panel", "HMR Panel", "HDHMR Panel"], finish: ["Prelam", "Lamina", "Acrylic"] },
    { name: "Pooja Box", structure: ["MR-Commercial Plywood", "BWR Plywood", "BWP Plywood", "BWR/BWP Plywood", "MDF Panel", "HMR Panel", "HDHMR Panel"], finish: ["Prelam", "Lamina", "Acrylic"] },
    { name: "TV Unit", structure: ["MR-Commercial Plywood", "BWR Plywood", "BWP Plywood", "BWR/BWP Plywood", "MDF Panel", "HMR Panel", "HDHMR Panel"], finish: ["Prelam", "Lamina", "Acrylic"] },
    { name: "Panelling Work", structure: ["MR-Commercial Plywood", "BWR Plywood", "BWP Plywood", "BWR/BWP Plywood", "MDF Panel", "HMR Panel", "HDHMR Panel"], finish: ["Prelam", "Lamina", "Acrylic"] }
  ];

  let products = [];
  let nextId = 0;

  const productContainer = document.getElementById("productContainer");
  const productHeader = document.getElementById("productHeader");
  const subtotalEl = document.getElementById("subtotal");
  const totalEl = document.getElementById("total");

  document.addEventListener("DOMContentLoaded", () => {
    addProduct();
  });

  function addProduct() {
    showHeaderIfHidden();
    const id = nextId++;
    products.push({
      id,
      product: "Wardrobe",
      structure: "MR-Commercial Plywood",
      finish: "Prelam",
      length: "",
      width: "",
      rate: "",
      custom: false
    });
    renderProduct(id);
    updateTotals();
  }

  function addCustomProduct() {
    showHeaderIfHidden();
    const defaultstructure = PRODUCTS[0].structure[0];
    const defaultfinish = PRODUCTS[0].finish[0];

    const id = nextId++;
    products.push({
      id,
      product: "",
      structure: defaultstructure,
      finish: defaultfinish,
      length: "",
      width: "",
      rate: "",
      custom: true
    });
    renderProduct(id);
    updateTotals();
  }

  function showHeaderIfHidden() {
    productHeader.classList.remove("hidden");
    productContainer.classList.remove("hidden");
  }

  function renderProduct(id) {
    const product = products.find(p => p.id === id);
    if (!product) return;

    const row = document.createElement("div");
    row.className = "product-row grid gap-2 items-center p-2 border rounded-lg";
    row.id = `product-${id}`;

    const structureOptions = PRODUCTS[0].structure.map(g =>
      `<option ${g === product.structure ? 'selected' : ''}>${g}</option>`
    ).join('');
    const finishOptions = PRODUCTS[0].finish.map(m =>
      `<option ${m === product.finish ? 'selected' : ''}>${m}</option>`
    ).join('');

    if (product.custom) {
      row.innerHTML = `
        <input type="text" placeholder="Product Name" value="${product.product}" 
               onchange="updateProduct(${id}, 'product', this.value)" class="p-2 border rounded">
        <select onchange="updateProduct(${id}, 'structure', this.value)" class="p-2 border rounded">
          ${structureOptions}
        </select>
        <select onchange="updateProduct(${id}, 'finish', this.value)" class="p-2 border rounded">
          ${finishOptions}
        </select>
        <input type="number" min="0" step="0.1" value="${product.length}" 
               onchange="updateProduct(${id}, 'length', parseFloat(this.value))" class="p-2 border rounded" placeholder="Length">
        <input type="number" min="0" step="0.1" value="${product.width}" 
               onchange="updateProduct(${id}, 'width', parseFloat(this.value))" class="p-2 border rounded" placeholder="Width">
        <input type="number" min="0" value="${product.rate}" 
               onchange="updateProduct(${id}, 'rate', parseFloat(this.value))" class="p-2 border rounded" placeholder="Rate">
        <input type="text" readonly value="${calculateAmount(product)}" 
               class="p-2 border rounded bg-gray-100">
        <button onclick="removeProduct(${id})" class="text-red-500 hover:text-red-700 p-1">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
          </svg>
        </button>
      `;
    } else {
      const productOptions = PRODUCTS.map(p =>
        `<option value="${p.name}" ${p.name === product.product ? 'selected' : ''}>${p.name}</option>`
      ).join('');
      const selectedProduct = PRODUCTS.find(p => p.name === product.product) || PRODUCTS[0];
      const structureOptions = selectedProduct.structure.map(g =>
        `<option ${g === product.structure ? 'selected' : ''}>${g}</option>`
      ).join('');
      const finishOptions = selectedProduct.finish.map(m =>
        `<option ${m === product.finish ? 'selected' : ''}>${m}</option>`
      ).join('');

      row.innerHTML = `
        <select onchange="updateProduct(${id}, 'product', this.value)" class="p-2 border rounded">
          ${productOptions}
        </select>
        <select onchange="updateProduct(${id}, 'structure', this.value)" class="p-2 border rounded">
          ${structureOptions}
        </select>
        <select onchange="updateProduct(${id}, 'finish', this.value)" class="p-2 border rounded">
          ${finishOptions}
        </select>
        <input type="number" min="0" step="0.1" value="${product.length}" 
               onchange="updateProduct(${id}, 'length', parseFloat(this.value))" class="p-2 border rounded" placeholder="Length">
        <input type="number" min="0" step="0.1" value="${product.width}" 
               onchange="updateProduct(${id}, 'width', parseFloat(this.value))" class="p-2 border rounded" placeholder="Width">
        <input type="number" min="0" value="${product.rate}" 
               onchange="updateProduct(${id}, 'rate', parseFloat(this.value))" class="p-2 border rounded" placeholder="Rate">
        <input type="text" readonly value="${calculateAmount(product)}" 
               class="p-2 border rounded bg-gray-100">
        <button onclick="removeProduct(${id})" class="text-red-500 hover:text-red-700 p-1">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
          </svg>
        </button>
      `;
    }

    productContainer.appendChild(row);
  }

  function updateProduct(id, property, value) {
    const product = products.find(p => p.id === id);
    if (!product) return;

    product[property] = value;

    // If product type changes, reset structure and finish
    if (property === 'product' && !product.custom) {
      const selectedProduct = PRODUCTS.find(p => p.name === value);
      if (selectedProduct) {
        product.structure = selectedProduct.structure[0];
        product.finish = selectedProduct.finish[0];
      }
    }

    const row = document.getElementById(`product-${id}`);
    if (row) row.remove(); // Re-render the row
    renderProduct(id);
    updateTotals();
  }

  function calculateAmount(p) {
    const area = (parseFloat(p.length) || 0) * (parseFloat(p.width) || 0);
    const rate = parseFloat(p.rate) || 0;
    return (area * rate).toFixed(2);
  }

  function removeProduct(id) {
    products = products.filter(p => p.id !== id);
    const row = document.getElementById(`product-${id}`);
    if (row) row.remove();
    if (products.length === 0) {
      productContainer.classList.add("hidden");
      productHeader.classList.add("hidden");
    }
    updateTotals();
  }

  function updateTotals() {
    let subtotal = 0;
    products.forEach(p => {
      subtotal += parseFloat(calculateAmount(p));
    });
    subtotalEl.textContent = `Subtotal: ‚Çπ${subtotal.toFixed(2)}`;
    totalEl.textContent = `Total: ‚Çπ${subtotal.toFixed(2)}`;
  }



  function generatePDF() {
  const clientName = document.querySelector('input[type="text"]').value || 'Not provided';
  const clientPhone = document.querySelector('input[type="tel"]').value || 'Not provided';
  const date = document.getElementById('dateInput').value || new Date().toLocaleDateString();

  const element = document.createElement('div');
  element.style.padding = '20px';
  element.style.fontFamily = 'Arial, sans-serif';

  element.innerHTML = `
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
  <div style="flex: 2; font-size: 12px; color: #555; line-height: 1.3;">
    <div>No. 3, Aruna Nagar, Medical College Road,</div>
    <div>Thanjavur ‚Äì 613004, Tamil Nadu</div>
    <div>üìû <a href="tel:+918825696139">+91 88256 96139</a> | ‚úâÔ∏è <a href="mailto:mail@creativedesignstudios.in">mail@creativedesignstudios.in</a></div>
    <div>üåê <a href="https://www.creativedesignstudios.in">www.creativedesignstudios.in</a></div>
  </div>

  <div style="flex: 1; text-align: right;">
    <img src="assets/Logo small file.png" alt="Logo" style="height: 60px;" crossorigin="anonymous">
  </div>
</div>

  
</div>

<h1 style="color: #FD9800; font-size: 24px; font-weight: bold; text-align: center; margin-top: -10px; margin-bottom: 20px;">
  Interior Work Estimate
</h1>


      <div style="display: flex; justify-content: space-between; margin-top: 20px; border-top: 1px solid #eee; padding-top: 15px;">
        <div style="text-align: left;">
          <p><strong>Client:</strong> ${clientName}</p>
          <p><strong>Phone:</strong> ${clientPhone}</p>
        </div>
        <div style="text-align: right;">
          <p><strong>Date:</strong> ${date}</p>
        </div>
      </div>
    </div>
  `;

  let tableHTML = `
    <table style="width: 100%; border-collapse: collapse; margin: 20px 0; font-size: 12px;">
      <thead>
        <tr style="background-color: #f3f4f6;">
          <th style="padding: 8px; border: 1px solid #d1d5db; text-align: left;">Product</th>
          <th style="padding: 8px; border: 1px solid #d1d5db; text-align: left;">Structure</th>
          <th style="padding: 8px; border: 1px solid #d1d5db; text-align: left;">Finish</th>
          <th style="padding: 8px; border: 1px solid #d1d5db; text-align: right;">Dimensions (ft)</th>
          <th style="padding: 8px; border: 1px solid #d1d5db; text-align: right;">Rate (‚Çπ)</th>
          <th style="padding: 8px; border: 1px solid #d1d5db; text-align: right;">Amount (‚Çπ)</th>
        </tr>
      </thead>
      <tbody>
  `;

  products.forEach(product => {
    const dimensions = `${product.length || 0} √ó ${product.width || 0}`;
    tableHTML += `
      <tr>
        <td style="padding: 8px; border: 1px solid #d1d5db;">${product.product || 'Custom'}</td>
        <td style="padding: 8px; border: 1px solid #d1d5db;">${product.structure}</td>
        <td style="padding: 8px; border: 1px solid #d1d5db;">${product.finish}</td>
        <td style="padding: 8px; border: 1px solid #d1d5db; text-align: right;">${dimensions}</td>
        <td style="padding: 8px; border: 1px solid #d1d5db; text-align: right;">${product.rate || 0}</td>
        <td style="padding: 8px; border: 1px solid #d1d5db; text-align: right;">${calculateAmount(product)}</td>
      </tr>
    `;
  });

  const subtotal = products.reduce((sum, p) => sum + parseFloat(calculateAmount(p)), 0);
  tableHTML += `
      </tbody>
    </table>
    <div style="text-align: right; margin: 20px 0;">
      <p style="font-size: 14px;"><strong>Subtotal:</strong> ‚Çπ${subtotal.toFixed(2)}</p>
      <p style="font-size: 16px; font-weight: bold;"><strong>Total:</strong> ‚Çπ${subtotal.toFixed(2)}</p>
    </div>
  `;

  element.innerHTML += tableHTML;

  // Page break here for second page
  element.innerHTML += `<div style="page-break-after: always;"></div>`;

  element.innerHTML += `


  <div style="background-color: #f8fafc; padding: 10px; border-radius: 5px; margin: 15px 0; font-size: 13px;">
      <p style="margin: 5px 0; color: #FD9800;"><strong>Client Benefits & Assurance:</strong></p>
      <p style="margin: 5px 0;">üåü Rated 4.9‚òÖ <a href="https://www.google.com/maps/place/Creative+Design+Studios" target="_blank">4.9‚òÖ on Google</a> ‚Äì Trusted by Clients in Thanjavur</p>
      <p style="margin: 5px 0;">üì∑ Follow Us: 
        <span style="color: #FD9800;"><a href="https://www.instagram.com/creative_design_studios_offl/" target="_blank">Instagram</a></span> | 
        <span style="color: #FF0000;"><a href="https://www.youtube.com/@CreativeDesignStudios" target="_blank">YouTube</a></span>
      </p>
    </div>
    <div style="margin: 25px 0; font-size: 11px;">
      <h3 style="color: #FD9800; border-bottom: 1px solid #eee; padding-bottom: 5px;">Terms & Conditions</h3>
      <ol style="padding-left: 15px; margin-top: 8px;">
        <li style="margin-bottom: 5px;">Completion Period: 20 to 30 days for above mentioned work</li>
        <li style="margin-bottom: 5px;">Any work executed other than mentioned in the above, Quotation will be considered extra</li>
        <li style="margin-bottom: 5px;">Completion period, subject to the below mentioned payment terms</li>
        <li style="margin-bottom: 5px;">Shutter CNC, Gas copper Pipe line works if any, extra</li>
        <li style="margin-bottom: 5px;">Demolishing, Appliances, civil and plumbing works if any, extra</li>
        <li style="margin-bottom: 5px;">Wall tiles and fixing works if any, extra</li>
        <li style="margin-bottom: 5px;">Color themes are subject to availability</li>
        <li style="margin-bottom: 5px;">Transport charges are extra</li>
        <li style="margin-bottom: 5px;">Work will be commenced after payment realization</li>
        <li style="margin-bottom: 5px;">If any materials are not available in market, same equal branded material will be used</li>
      </ol>
    </div>

    <div style="display: flex; justify-content: space-between; margin: 25px 0; font-size: 11px;">
      <div style="width: 48%;">
        <h3 style="color: #FD9800; border-bottom: 1px solid #eee; padding-bottom: 5px;">Payment Terms</h3>
        <ul style="padding-left: 15px; margin-top: 8px;">
          <li style="margin-bottom: 5px;">Rs.50% - Advance on confirmation</li>
          <li style="margin-bottom: 5px;">Rs.40% - on work processing of material</li>
          <li style="margin-bottom: 5px;">Rs.10% - After Completion</li>
        </ul>
      </div>

      <div style="width: 48%;">
        <h3 style="color: #6b7280; border-bottom: 1px solid #eee; padding-bottom: 5px;">Note</h3>
        <ul style="padding-left: 15px; margin-top: 8px;">
          <li style="margin-bottom: 5px; font-size: 10px; color: #6b7280;">This estimate is valid for 15 days from the date of issuance</li>
        </ul>
      </div>
    </div>

    <div style="margin-top: 40px; text-align: center; color: #6b7280; font-size: 11px; border-top: 1px solid #eee; padding-top: 15px;">
      <p>Thank you for choosing Creative Design Studios!</p>
    </div>

    <div style="text-align: right; margin-top: 20px; font-size: 10px; color: #999;">
      <p>Generated on ${new Date().toLocaleString()}</p>
    </div>
  `;

  const opt = {
    margin: 10,
    filename: `Interior_Estimate_${clientName.replace(/\s+/g, '_') || 'Customer'}.pdf`,
    image: { type: 'jpeg', quality: 0.98 },
    html2canvas: { scale: 2, logging: true, useCORS: true },
    jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait', hotfixes: ["px_scaling"] }
  };

  html2pdf().set(opt).from(element).save();
}


   // Set today's date automatically in the date input field
    const dateInput = document.getElementById("dateInput");
    if (dateInput) {
      const today = new Date().toISOString().split("T")[0];
      dateInput.value = today;
    }


</script>


</body>
</html>